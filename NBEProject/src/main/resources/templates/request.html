<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/51772bd9bd.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/request.css}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" defer></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script type="text/javascript" src="/cho/js/prod/category.js"></script>
    <link rel="stylesheet" href="/cho/css/prod/category.css">
    <script src="/js/request.js" defer></script>
    <title>주문 조회</title>
</head>
<body>
<div th:replace="~{cho/prod/header :: head}"></div>
<div th:replace="~{background::body}"></div>
<div th:replace="~{SecondaryBackground::body}"></div>
<hr><br><br><br>
<div class="transInfo" th:each="item : ${PurchaseStatusList}">
    <div class="transInfo2">
        <!-- 배송완료랑 결제완료만 -->
<!--        <h1 class="status" th:text="${item.status}">배송완료</h1>-->
        <span class="status" th:if="${item.pay.status == OK}">결제완료</span>
        <span class="status" th:if="${item.pay.status != READY}">결제대기</span>
        <div class="row" style="width: 500px;">
            <div class="col-auto" th:unless="${item.pay.status == CANCEL}">
                <img th:src="${item.goods.image}" id="productImage" class="productImage" alt="Product Image">
            </div>
            <div class="col">
                <br>
                <a class="productInfo" >7.10.12:00</a>
<!--                th:text="${item.regdate}"-->
                <br>
                <a class="productInfo" th:text="${item.goods.name}">상품이름상품이름상품이름상품이름상품이름</a><br>
                <a class="productInfo" th:text="${item.goods.price} + '원 ' + ${item.amount} + '개'">12345원 1개</a><br>
                <a class="productInfo" th:text="${item.opt}">@@@</a><br>
            </div>
        </div><br>
        <!-- 배송완료 상태만 리뷰작성 버튼 보이게 -->
        <div th:if="${item.pay.status == OK}">
            <div class="btnDiv">
                <a th:href="@{/review(id=${item.id})}">리뷰작성</a>
                <form class="request" th:method="post" th:action="@{request/cancel}">
                    <input type="hidden" name="imp_uid" th:value="${item.pay.paymentUid}">
                    <input type="submit" value="결제취소">
                </form>

            </div>
        </div>

<!--        <div th:if="${item.status == 'OK'}">-->
<!--            <div class="btnDiv">-->

<!--            </div>-->
<!--        </div>-->
    </div>
</div><br><br>

<div class="pagination2">
    <div class="pagination">
        <a href="#">&laquo;</a>
        <a href="#">1</a>
        <a href="#">2</a>
        <a href="#">3</a>
        <a href="#">4</a>
        <a href="#">5</a>
        <a href="#">6</a>
        <a href="#">&raquo;</a>
    </div>
</div>
</body>


</html>

<!--            <form th:method="get" th:action="@{/review(id=${item.itemId})}">-->
<!--                <input type="hidden" class="itemId" th:value="${item.itemId}">-->
<!--            </form>-->